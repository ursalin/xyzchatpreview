# 第一课：一个网页到底是什么

## 网页三件套

| 技术 | 比喻 | 作用 |
|------|------|------|
| HTML | 骨架/框架 | 定义页面上**有什么**（按钮、文字、区域） |
| CSS | 皮肤/装修 | 定义**长什么样**（颜色、大小、布局） |
| JavaScript (JS) | 大脑 | 定义**怎么动**（逻辑、交互、数据处理） |

## React 框架

- React 是 JavaScript 的一个框架
- 核心思路：**组件（Component）** = 乐高积木
- 小组件拼成大组件，大组件拼成页面
- 每个 `.tsx` 文件就是一个组件

### 组件举例（xyzchatpreview 项目）
- `ChatMessage` — 一条聊天气泡
- `ChatInput` — 底部输入框
- `ChatContainer` — 把气泡和输入框组装在一起的容器
- `VideoCall` — 整个视频通话页面

## 项目文件结构

```
src/
├── pages/          ← 页面（每个路由/URL 对应一个文件）
│   ├── Index.tsx        → /home 文字聊天主页
│   ├── VideoCall.tsx    → /video-call 视频通话
│   └── LockScreen.tsx   → / 锁屏页
├── components/     ← 可复用的积木块
│   ├── chat/            → 聊天相关组件（气泡、输入框等）
│   └── live2d/          → 角色动画相关
├── hooks/          ← 逻辑模块（★最重要★）
│   ├── useChat.ts       → 文字聊天的核心逻辑
│   ├── useVideoCall.ts  → 视频通话的核心逻辑
│   ├── useXunfeiSTT.ts  → 讯飞语音识别
│   └── useSettings.ts   → 设置管理
└── types/          ← 数据类型定义
```

### 重点
- **pages/** = 长什么样（页面布局）
- **hooks/** = 怎么运作（核心逻辑）→ 修 bug 大部分时间在这里
- **components/** = 可复用的 UI 零件

## 实际流程：发一条消息

1. 在 `ChatInput` 里打字，点发送
2. `ChatInput` 调用 `useChat.ts` 里的 `sendMessage` 函数
3. `sendMessage` 把消息加到列表（页面立刻显示你的消息）
4. 发网络请求到 AI 的 API
5. AI 返回回复，加到消息列表（页面显示 AI 回复）
6. 如果开了语音，自动调用 TTS 播放声音

### 实际 bug 案例
- "视频通话声音卡住" = 第6步出问题
- TTS 音频生成成功了，但手机浏览器的播放机制把音频卡住了
- 修复：改了 `usePresetAnimations.ts`（hooks 里的逻辑文件）

## 关键词速查
- **组件 (Component)**: 页面上的一个独立模块/积木
- **Hook**: React 里的逻辑复用单元，以 `use` 开头（如 `useChat`）
- **路由 (Route)**: URL 和页面的对应关系（`/home` → Index 页面）
- **API**: 前端和后端/AI 之间通信的接口
- **TTS**: Text-to-Speech，文字转语音
- **STT**: Speech-to-Text，语音转文字
